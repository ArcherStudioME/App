<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ArcherStudio</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="icon" href="../../resources/img/logo/app-logo.png" type="image/png">
  <link href="../../resources/css/main.css" rel="stylesheet" >

  <style>
     iframe {
      position: fixed;
      top: 70px;
      left: 0;
      width: 100%;
      height: calc(100dvh - 70px);
      border: none;
      display: none;
      background: var(--main-dark);
      z-index: 1000;
      transition: opacity 0.4s ease;
      opacity: 0;
    }
  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark sticky-navbar">
    <div class="container">
      <a class="navbar-brand fw-bold" href="../dashboard">
        <img src="../../resources/img/logo/app-logo.png" alt="Logo" class="me-2" style="height: 40px;">ArcherPrint
      </a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">

          <li class="nav-item">
            <a class="nav-link" href="javascript:void(0)" onclick="resetPage(); closeNavbar()">Reset Form</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../dashboard">Back to Home</a>
          </li>

        </ul>
      </div>
    </div>
  </nav>

  <div id="mainContent">
    <div class="container my-5">

      <div id="paperOptions">
        <div class="row g-3">
          <div class="col-12">
            <!-- Title -->
            <div class="d-flex justify-content-between align-items-center mt-5 mb-3">
              <h5 class="text-white text-uppercase mb-0">Select Paper</h5>
            </div>

            <!-- Options Row -->
            <div class="row g-3">
              <div class="col-md-3 col-6">
                <a href="javascript:void(0)" class="text-decoration-none" onclick="loadPaper('plainpaper')">
                  <div class="glass-card text-center h-100 text-white">
                    <i class='bx bx-file-blank glass-icon mb-2 fs-2'></i>
                    <h6 class="mb-0">Plain</h6>
                    <h4 class="fw-bold">Paper</h4>
                  </div>
                </a>
              </div>

              <div class="col-md-3 col-6">
                <a href="javascript:void(0)" class="text-decoration-none" onclick="loadPaper('specialtypaper')">
                  <div class="glass-card text-center h-100 text-white">
                    <i class='bx bx-paint glass-icon mb-2 fs-2'></i>
                    <h6 class="mb-0">Specialty</h6>
                    <h4 class="fw-bold">Paper</h4>
                  </div>
                </a>
              </div>

              <div class="col-md-3 col-6">
                <a href="javascript:void(0)" class="text-decoration-none" onclick="loadPaper('reviewerpaper')">
                  <div class="glass-card text-center h-100 text-white">
                    <i class='bx bx-book-open glass-icon mb-2 fs-2'></i>
                    <h6 class="mb-0">Reviewer</h6>
                    <h4 class="fw-bold">Handouts</h4>
                  </div>
                </a>
              </div>

              <div class="col-md-3 col-6">
                <a href="javascript:void(0)" class="text-decoration-none" onclick="loadPaper('customizedpaper')">
                  <div class="glass-card text-center h-100 text-white">
                    <i class='bx bx-cog glass-icon mb-2 fs-2'></i>
                    <h6 class="mb-0">Customized</h6>
                    <h4 class="fw-bold">Items</h4>
                  </div>
                </a>
              </div>
            </div>

            <!-- Carousel (aligned same width as row above) -->
            <div id="paperGuideCarousel" class="carousel slide glass-card text-white shadow mt-4 rounded-4" data-bs-ride="carousel">
              <div class="carousel-inner p-2 mb-4">

                <div class="carousel-item active">
                  <div class="d-flex align-items-start">
                    <i class='bx bx-file-blank fs-3 text-info me-3'></i>
                    <div>
                      <strong>Plain Paper</strong><br>
                      Bond paper for everyday documents, worksheets, and school tasks.
                    </div>
                  </div>
                </div>

                <div class="carousel-item">
                  <div class="d-flex align-items-start">
                    <i class='bx bx-paint fs-3 text-warning me-3'></i>
                    <div>
                      <strong>Specialty Paper</strong><br>
                      Matte, glossy, semi-gloss, or sticker paper for high-quality and creative prints.
                    </div>
                  </div>
                </div>

                <div class="carousel-item">
                  <div class="d-flex align-items-start">
                    <i class='bx bx-book-open fs-3 text-success me-3'></i>
                    <div>
                      <strong>Reviewer Handouts</strong><br>
                      Budget paper for bulk handouts, reviewers, and study materials.
                    </div>
                  </div>
                </div>

                <div class="carousel-item">
                  <div class="d-flex align-items-start">
                    <i class='bx bx-cog fs-3 text-secondary me-3'></i>
                    <div>
                      <strong>Customized Items</strong><br>
                      Template-based orders like invitations, bookmarks, and labels.
                    </div>
                  </div>
                </div>
              </div>

              <!-- Optional: Indicators -->
              <div class="carousel-indicators">
                <button type="button" data-bs-target="#paperGuideCarousel" data-bs-slide-to="0" class="active" aria-current="true"></button>
                <button type="button" data-bs-target="#paperGuideCarousel" data-bs-slide-to="1"></button>
                <button type="button" data-bs-target="#paperGuideCarousel" data-bs-slide-to="2"></button>
                <button type="button" data-bs-target="#paperGuideCarousel" data-bs-slide-to="3"></button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading + Iframe -->
  <div class="row g-3">
    <div id="loadingIndicator" style="display: none;" class="text-center my-4">
      <div class="spinner-glass"></div>
    </div>
  </div>
      
  <iframe allow="geolocation; camera; microphone; fullscreen" id="orderFrame" style="display: none;" frameborder="0" class="iframe-wrapper order-full" src=""></iframe>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../../resources/js/nav.js"></script>
  <script src="../../resources/js/verify.js"></script>
  <script>
    function loadPaper(type) {
      const referenceID = localStorage.getItem('UserID') || 'guest';
      const customerID = localStorage.getItem('customerID') || 'guest';
      const root = location.origin;
      const iframe = document.getElementById('orderFrame');
      const loader = document.getElementById('loadingIndicator');
      const mainContent = document.getElementById('mainContent');

      const url = `https://script.google.com/macros/s/AKfycbyZZog4dSiPDTxSD-36qmURF1p5h-Q4LhGFpqA_0C67cpNPyMmE_X8ukyIySe61J-iJOQ/exec?type=${type}&referenceID=${encodeURIComponent(referenceID)}&customerID=${encodeURIComponent(customerID)}&host=${encodeURIComponent(root)}`;

      // Fade out main content
      mainContent.style.transition = "opacity 0.5s ease";
      mainContent.style.opacity = 0;

      setTimeout(() => {
        mainContent.style.display = 'none';
        loader.style.display = 'block';
        iframe.style.display = 'none';
        iframe.src = url;
      }, 500);

      iframe.onload = () => {
        loader.style.display = 'none';
        iframe.style.opacity = 0;
        iframe.style.display = 'block';

        // Fade in iframe
        setTimeout(() => {
          iframe.style.transition = "opacity 0.5s ease";
          iframe.style.opacity = 1;
        }, 50);
      };
    }

    function resetPage() {
      const mainContent = document.getElementById('mainContent');
      const iframe = document.getElementById('orderFrame');
      const loader = document.getElementById('loadingIndicator');

      iframe.src = "";
      iframe.style.transition = "opacity 0.5s ease";
      iframe.style.opacity = 0;

      setTimeout(() => {
        iframe.style.display = 'none';
        loader.style.display = 'none';

        mainContent.style.display = 'block';
        mainContent.style.opacity = 0;

        setTimeout(() => {
          mainContent.style.transition = "opacity 0.5s ease";
          mainContent.style.opacity = 1;
        }, 50);

        window.scrollTo({ top: 0, behavior: "smooth" });
      }, 300);
    }

    function closeNavbar() {
      const navbarCollapse = document.getElementById('navbarNav');
      const bsCollapse = bootstrap.Collapse.getInstance(navbarCollapse) || new bootstrap.Collapse(navbarCollapse, { toggle: false });
      bsCollapse.hide();
    }
  </script>


</body>
</html>
